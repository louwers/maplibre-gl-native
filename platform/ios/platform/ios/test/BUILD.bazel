load("@build_bazel_rules_apple//apple:ios.bzl", "ios_build_test", "ios_unit_test")

objc_library(
    name = "ios_tests_src",
    srcs = glob(
        [
            "*.h",
            "*.m",
        ],
        allow_empty = True,
        exclude = [
            "MLNMapViewContentInsetTests.m",
        ],
    ),
    deps = [
        "//platform/ios:sdk",
        "//platform/ios/platform/darwin/test:test_utility",
        # "//platform/ios:sdk-headers",
    ],
)

ios_unit_test(
    name = "ios_test",
    minimum_os_version = "12.0",
    visibility = [
        "@rules_xcodeproj//xcodeproj:generated",
    ],
    deps = [
        "ios_tests_src",
        # "//platform/ios/platform/darwin/test:shared_tests_objc_srcs",
        # "//platform/ios/platform/darwin/test:shared_tests_objcpp_srcs"
    ],
)

ios_build_test(
    name = "my_build_test",
    minimum_os_version = "12.0",
    targets = [
        "ios_tests",
    ],
)
